<!DOCTYPE html>
<html>
<head>
  <meta name="google-site-verification" content="JOq6Kgpo4Nit5lXAqibS7-wfuh3AKkQUMMRIXcP7in4" />

  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <title>SSM：Struts2+Spring+Mybatis Web 项目搭建 | 小灰灰写代码</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="前言在 Intellij 中配置 SSM Web 开发框架。

Struts2 主要用它的视图统筹
Spring 整个框架的统筹
Mybatis3 持久层,MyBatis 是支持定制化SQL、存储过程以及高级映射的优秀的持久层框架

参考：夕下奕林:Idea SpringMVC+Spring+MyBatis+Maven整合">
<meta property="og:type" content="article">
<meta property="og:title" content="SSM：Struts2+Spring+Mybatis Web 项目搭建">
<meta property="og:url" content="http://devlu.me/2016/01/14/SSM-Struts2-Spring-Mybatis-Jersey-Web-项目搭建/index.html">
<meta property="og:site_name" content="小灰灰写代码">
<meta property="og:description" content="前言在 Intellij 中配置 SSM Web 开发框架。

Struts2 主要用它的视图统筹
Spring 整个框架的统筹
Mybatis3 持久层,MyBatis 是支持定制化SQL、存储过程以及高级映射的优秀的持久层框架

参考：夕下奕林:Idea SpringMVC+Spring+MyBatis+Maven整合">
<meta property="og:image" content="http://7xjzst.com1.z0.glb.clouddn.com/blog_pic_QQ20160119-0%402x.png">
<meta property="og:image" content="http://7xjzst.com1.z0.glb.clouddn.com/blog_pic_QQ20160119-1%402x.png">
<meta property="og:image" content="http://7xjzst.com1.z0.glb.clouddn.com/blog_pic_QQ20160119-2%402x.png">
<meta property="og:image" content="http://7xjzst.com1.z0.glb.clouddn.com/blog_pic_QQ20160119-3%402x.png">
<meta property="og:image" content="http://7xjzst.com1.z0.glb.clouddn.com/blog_pic_QQ20160119-4%402x.png">
<meta property="og:image" content="http://7xjzst.com1.z0.glb.clouddn.com/blog_pic_QQ20160119-5%402x.png">
<meta property="og:image" content="http://7xjzst.com1.z0.glb.clouddn.com/blog_pic_QQ20160119-6%402x.png">
<meta property="og:image" content="http://7xjzst.com1.z0.glb.clouddn.com/blog_pic_QQ20160119-7%402x.png">
<meta property="og:image" content="http://7xjzst.com1.z0.glb.clouddn.com/blog_pic_QQ20160120-0%402x.png">
<meta property="og:image" content="http://7xjzst.com1.z0.glb.clouddn.com/blog_pic_QQ20160121-0%402x.png">
<meta property="og:image" content="http://7xjzst.com1.z0.glb.clouddn.com/blog_pic_QQ20160121-1%402x.png">
<meta property="og:image" content="http://7xjzst.com1.z0.glb.clouddn.com/blog_pic_addtomcat.gif">
<meta property="og:image" content="http://7xjzst.com1.z0.glb.clouddn.com/blog_pic_QQ20160122-0%402x.png">
<meta property="og:image" content="http://7xjzst.com1.z0.glb.clouddn.com/blog_pic_QQ20160122-1%402x.png">
<meta property="og:image" content="http://7xjzst.com1.z0.glb.clouddn.com/blog_pic_QQ20160122-2%402x.png">
<meta property="og:image" content="http://7xjzst.com1.z0.glb.clouddn.com/blog_pic_QQ20160122-3%402x.png">
<meta property="og:image" content="http://7xjzst.com1.z0.glb.clouddn.com/blog_pic_QQ20160122-4%402x.png">
<meta property="og:updated_time" content="2016-01-26T07:09:47.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="SSM：Struts2+Spring+Mybatis Web 项目搭建">
<meta name="twitter:description" content="前言在 Intellij 中配置 SSM Web 开发框架。

Struts2 主要用它的视图统筹
Spring 整个框架的统筹
Mybatis3 持久层,MyBatis 是支持定制化SQL、存储过程以及高级映射的优秀的持久层框架

参考：夕下奕林:Idea SpringMVC+Spring+MyBatis+Maven整合">
<meta name="twitter:image" content="http://7xjzst.com1.z0.glb.clouddn.com/blog_pic_QQ20160119-0%402x.png">
  
    <link rel="alternative" href="/atom.xml" title="小灰灰写代码" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
  <link rel="stylesheet" href="/css/style.css">

</head>

<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">

	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="http://7xjzst.com1.z0.glb.clouddn.com/blog/pic/avatar/1.pic_hd.jpg" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">Lulee007</a></h1>
		</hgroup>

		
		<p class="header-subtitle">码农，程序猿，伪全栈</p>
		

		<script>
			(function() {
				var cx = '015410210664254622126:zzeov19ptnm';
				var gcse = document.createElement('script');
				gcse.type = 'text/javascript';
				gcse.async = true;
				gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
						'//cse.google.com/cse.js?cx=' + cx;
				var s = document.getElementsByTagName('script')[0];
				s.parentNode.insertBefore(gcse, s);
			})();
		</script>
		<gcse:searchbox-only></gcse:searchbox-only>
		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						<div class="icon-wrap icon-link hide" data-idx="2">
							<div class="loopback_l"></div>
							<div class="loopback_r"></div>
						</div>
						
						
					</div>

				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						<li>友情链接</li>
						
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
							<li><a href="/books/">阅读</a></li>
				        
							<li><a href="/music/">音乐</a></li>
				        
							<li><a href="/mv/">MV</a></li>
				        
							<li><a href="/cartoon/">卡通</a></li>
				        
							<li><a href="/about/">关于我</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a target="_blank" href="https://github.com/lulee007/" title="github">
									<i class="iconfont icon-github"></i>
								</a>
					        
								<a target="_blank" href="http://weibo.com/lulee007/" title="weibo">
									<i class="iconfont icon-weibo"></i>
								</a>
					        
								<a target="_blank" href="mailto:lulee007@live.com" title="mail">
									<i class="iconfont icon-mail"></i>
								</a>
					        
								<a target="_blank" href="/atom.xml" title="rss">
									<i class="iconfont icon-rss"></i>
								</a>
					        
						</div>
					</nav>
				</section>

				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tagsCN/Android/" style="font-size: 16.67px;">Android</a> <a href="/tagsCN/Android-Studio/" style="font-size: 13.33px;">Android Studio</a> <a href="/tagsCN/AngularJs/" style="font-size: 13.33px;">AngularJs</a> <a href="/tagsCN/BluePrint/" style="font-size: 10px;">BluePrint</a> <a href="/tagsCN/Cent-OS/" style="font-size: 10px;">Cent OS</a> <a href="/tagsCN/Cordova/" style="font-size: 13.33px;">Cordova</a> <a href="/tagsCN/Countly-Web-Server/" style="font-size: 10px;">Countly Web Server</a> <a href="/tagsCN/Debug/" style="font-size: 10px;">Debug</a> <a href="/tagsCN/Github/" style="font-size: 10px;">Github</a> <a href="/tagsCN/Git命令/" style="font-size: 10px;">Git命令</a> <a href="/tagsCN/HTML5/" style="font-size: 13.33px;">HTML5</a> <a href="/tagsCN/Hexo/" style="font-size: 20px;">Hexo</a> <a href="/tagsCN/Hybrid-App/" style="font-size: 13.33px;">Hybrid App</a> <a href="/tagsCN/Instrumentation/" style="font-size: 10px;">Instrumentation</a> <a href="/tagsCN/Intellij-IDEA/" style="font-size: 10px;">Intellij IDEA</a> <a href="/tagsCN/Ionic/" style="font-size: 13.33px;">Ionic</a> <a href="/tagsCN/Jenkins/" style="font-size: 13.33px;">Jenkins</a> <a href="/tagsCN/Log/" style="font-size: 10px;">Log</a> <a href="/tagsCN/Mac/" style="font-size: 20px;">Mac</a> <a href="/tagsCN/Mybatis3/" style="font-size: 13.33px;">Mybatis3</a> <a href="/tagsCN/Mysql/" style="font-size: 10px;">Mysql</a> <a href="/tagsCN/OpenWrt/" style="font-size: 10px;">OpenWrt</a> <a href="/tagsCN/Python/" style="font-size: 10px;">Python</a> <a href="/tagsCN/RESTful/" style="font-size: 10px;">RESTful</a> <a href="/tagsCN/SVN/" style="font-size: 10px;">SVN</a> <a href="/tagsCN/Scrapy/" style="font-size: 10px;">Scrapy</a> <a href="/tagsCN/Spring/" style="font-size: 13.33px;">Spring</a> <a href="/tagsCN/Struts2/" style="font-size: 13.33px;">Struts2</a> <a href="/tagsCN/Subversion/" style="font-size: 10px;">Subversion</a> <a href="/tagsCN/Transmission/" style="font-size: 10px;">Transmission</a> <a href="/tagsCN/Ubuntu/" style="font-size: 10px;">Ubuntu</a> <a href="/tagsCN/Unit-Test/" style="font-size: 10px;">Unit Test</a> <a href="/tagsCN/UnitTest/" style="font-size: 13.33px;">UnitTest</a> <a href="/tagsCN/root/" style="font-size: 10px;">root</a> <a href="/tagsCN/单元测试/" style="font-size: 13.33px;">单元测试</a> <a href="/tagsCN/命令/" style="font-size: 10px;">命令</a> <a href="/tagsCN/多说评论/" style="font-size: 10px;">多说评论</a> <a href="/tagsCN/小米路由器/" style="font-size: 10px;">小米路由器</a> <a href="/tagsCN/接口文档/" style="font-size: 10px;">接口文档</a> <a href="/tagsCN/混合型移动应用/" style="font-size: 13.33px;">混合型移动应用</a> <a href="/tagsCN/百度搜索链接收录/" style="font-size: 10px;">百度搜索链接收录</a> <a href="/tagsCN/站内搜索/" style="font-size: 10px;">站内搜索</a> <a href="/tagsCN/谷歌搜索链接收录/" style="font-size: 10px;">谷歌搜索链接收录</a> <a href="/tagsCN/迁移/" style="font-size: 10px;">迁移</a> <a href="/tagsCN/配置/" style="font-size: 10px;">配置</a> <a href="/tagsCN/重置密码/" style="font-size: 10px;">重置密码</a>
					</div>
				</section>
				

				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://devswl.gitcafe.io/">SunBlog</a>
			        
			        </div>
				</section>
				

				
			</div>
		</div>
	</header>
</div>

    
      <a id="fork_me_on_github" href="https://github.com/lulee007"><img style="position: fixed; top: 0; left: 0; border: 0;" src="https://camo.githubusercontent.com/c6286ade715e9bea433b4705870de482a654f78a/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f6c6566745f77686974655f6666666666662e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_left_white_ffffff.png"></a>
    
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">Lulee007</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
			
				<img lazy-src="http://7xjzst.com1.z0.glb.clouddn.com/blog/pic/avatar/1.pic_hd.jpg" class="js-avatar">
			
			</div>
			<hgroup>
			  <h1 class="header-author">Lulee007</h1>
			</hgroup>
			
			<p class="header-subtitle">码农，程序猿，伪全栈</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
					<li><a href="/books/">阅读</a></li>
		        
					<li><a href="/music/">音乐</a></li>
		        
					<li><a href="/mv/">MV</a></li>
		        
					<li><a href="/cartoon/">卡通</a></li>
		        
					<li><a href="/about/">关于我</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a target="_blank" href="https://github.com/lulee007/" title="github">
							<i class="iconfont icon-github"></i>
						</a>
			        
						<a target="_blank" href="http://weibo.com/lulee007/" title="weibo">
							<i class="iconfont icon-weibo"></i>
						</a>
			        
						<a target="_blank" href="mailto:lulee007@live.com" title="mail">
							<i class="iconfont icon-mail"></i>
						</a>
			        
						<a target="_blank" href="/atom.xml" title="rss">
							<i class="iconfont icon-rss"></i>
						</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>

      <div class="body-wrap"><article id="post-SSM-Struts2-Spring-Mybatis-Jersey-Web-项目搭建" class="article article-type-post" itemscope itemprop="blogPost">
    
    <div class="article-meta">
      <a href="/2016/01/14/SSM-Struts2-Spring-Mybatis-Jersey-Web-项目搭建/" class="article-date">
  	<time datetime="2016-01-14T11:55:14.000Z" itemprop="datePublished">2016-01-14</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      SSM：Struts2+Spring+Mybatis Web 项目搭建
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tagsCN/Mybatis3/">Mybatis3</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tagsCN/Spring/">Spring</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tagsCN/Struts2/">Struts2</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tagsCN/UnitTest/">UnitTest</a></li></ul>
	</div>

        
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/技术/">技术</a>
	</div>


        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <!-- Table of Contents -->
        
          
            <div id="toc" class="article-toc">
            <h2>目录</h2>
              <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#前言"><span class="toc-number">1.</span> <span class="toc-text">前言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#项目创建"><span class="toc-number">2.</span> <span class="toc-text">项目创建</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#创建新的Maven-WebApp项目"><span class="toc-number">2.1.</span> <span class="toc-text">创建新的Maven WebApp项目</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#配置项目目录"><span class="toc-number">2.2.</span> <span class="toc-text">配置项目目录</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#配置项目"><span class="toc-number">3.</span> <span class="toc-text">配置项目</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#配置数据库连接mysql-db-properties"><span class="toc-number">3.1.</span> <span class="toc-text">配置数据库连接mysql_db.properties</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#配置Mybatis-Generator"><span class="toc-number">3.2.</span> <span class="toc-text">配置Mybatis Generator</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#配置Struts2-Spring-Mybatis3"><span class="toc-number">3.3.</span> <span class="toc-text">配置Struts2+Spring+Mybatis3</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#配置Log4j"><span class="toc-number">3.4.</span> <span class="toc-text">配置Log4j</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#配置-ApplicationContext"><span class="toc-number">3.5.</span> <span class="toc-text">配置 ApplicationContext</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#配置Struts2"><span class="toc-number">3.6.</span> <span class="toc-text">配置Struts2</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#配置web-xml文件"><span class="toc-number">3.7.</span> <span class="toc-text">配置web.xml文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#配置-tomcat-启动"><span class="toc-number">3.8.</span> <span class="toc-text">配置 tomcat 启动</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#测试启动"><span class="toc-number">4.</span> <span class="toc-text">测试启动</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#编写UserService"><span class="toc-number">4.1.</span> <span class="toc-text">编写UserService</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#编写UserAction"><span class="toc-number">4.2.</span> <span class="toc-text">编写UserAction</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#strtus-action插件"><span class="toc-number">4.3.</span> <span class="toc-text">strtus action插件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#最后"><span class="toc-number">5.</span> <span class="toc-text">最后</span></a></li></ol>
            </div>
            <script type="text/javascript">
              var _article = document.getElementsByClassName('article')[0];
              <!-- setTimeout("_article.style.marginRight = '211px'",0);  -->
              setTimeout("_article.className += ' article2'",0);
              setTimeout("document.getElementById('toc').style.right = '15px'", 0);
            </script>
          
        
        <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>在 Intellij 中配置 SSM Web 开发框架。</p>
<ul>
<li>Struts2 主要用它的视图统筹</li>
<li>Spring 整个框架的统筹</li>
<li>Mybatis3 持久层,MyBatis 是支持定制化SQL、存储过程以及高级映射的优秀的持久层框架</li>
</ul>
<p>参考：<a href="http://blog.csdn.net/u011403655/article/details/46843331" target="_blank" rel="external">夕下奕林:Idea SpringMVC+Spring+MyBatis+Maven整合</a><br><a id="more"></a></p>
<h2 id="项目创建"><a href="#项目创建" class="headerlink" title="项目创建"></a>项目创建</h2><h3 id="创建新的Maven-WebApp项目"><a href="#创建新的Maven-WebApp项目" class="headerlink" title="创建新的Maven WebApp项目"></a>创建新的<code>Maven WebApp</code>项目</h3><p>打开Intellij 选择<code>File</code>-&gt;<code>New</code>-&gt;<code>Project...</code><br>然后在弹出对话框里依次选择：<br>左侧的<code>Maven</code>，顶部的<code>Create from archetype</code>和右侧的<code>org.apache.maven.archetypes:maven-archetype-webapp</code><br><img src="http://7xjzst.com1.z0.glb.clouddn.com/blog_pic_QQ20160119-0%402x.png" alt="选择maven项目">  </p>
<p>点击<code>Next</code>，输入<code>GroupId</code>和<code>ArtifaceId</code><br><img src="http://7xjzst.com1.z0.glb.clouddn.com/blog_pic_QQ20160119-1%402x.png" alt="输入 GroupId 与 ArtifaceId"></p>
<p>点击<code>Next</code>，这里主要是 Maven的环境配置，使用默认<br><img src="http://7xjzst.com1.z0.glb.clouddn.com/blog_pic_QQ20160119-2%402x.png" alt="Maven 默认环境"></p>
<p>点击<code>Next</code>，输入工程名称(<code>Project Name</code>)，修改保存目录(<code>Project Location</code>)<br><img src="http://7xjzst.com1.z0.glb.clouddn.com/blog_pic_QQ20160119-3%402x.png" alt="保存工程"></p>
<p><strong>注意：</strong> 如果选择的工程不存在，Intellij会提示自动创建该目录。<br><img src="http://7xjzst.com1.z0.glb.clouddn.com/blog_pic_QQ20160119-4%402x.png" alt="创建目录提示"></p>
<h3 id="配置项目目录"><a href="#配置项目目录" class="headerlink" title="配置项目目录"></a>配置项目目录</h3><p>此时Intellij会进行初始化，Maven 会下载依赖基本项。<br>初始化完成后，项目结构差不多是这个样子：<br><img src="http://7xjzst.com1.z0.glb.clouddn.com/blog_pic_QQ20160119-5%402x.png" alt="inited project"></p>
<p>在<code>src</code>-&gt;<code>main</code>目录下创建几个文件夹<br><img src="http://7xjzst.com1.z0.glb.clouddn.com/blog_pic_QQ20160119-6%402x.png" alt="creat folders"><br>打开 Intellij 底部标签栏的<code>Terminal</code>，并输入以下代码来批量创建目录：<br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p src<span class="regexp">/test/</span>java src<span class="regexp">/test/</span>resources</span><br><span class="line">cd src/main</span><br><span class="line">mkdir -p java<span class="regexp">/com/</span>lulee007<span class="regexp">/ssm/</span>pojo java<span class="regexp">/com/</span>lulee007<span class="regexp">/ssm/</span>mapper java<span class="regexp">/com/</span>lulee007<span class="regexp">/ssm/</span>service java<span class="regexp">/com/</span>lulee007<span class="regexp">/ssm/</span>action</span><br><span class="line">mkdir -p resources<span class="regexp">/config/</span>mybatis resources<span class="regexp">/config/</span>spring resources<span class="regexp">/config/</span>struts2 resources<span class="regexp">/com/</span>lulee007<span class="regexp">/ssm/</span>mapper</span><br><span class="line">mkdir webapp<span class="regexp">/WEB-INF/</span>views</span><br></pre></td></tr></table></figure></p>
<p>在<code>main</code>目录下的<code>java</code>目录上右击，选择<code>Mark Direcotry As</code>-&gt;<code>Sources Root</code><br>然后在<code>test</code>目录下的<code>java</code>目录上右击，选择<code>Mark Direcotry As</code>-&gt;<code>Test Sources Root</code><br>最后在<code>test</code>目录下的<code>resources</code>目录上右击，选择<code>Mark Direcotry As</code>-&gt;<code>Test Resources Root</code></p>
<h2 id="配置项目"><a href="#配置项目" class="headerlink" title="配置项目"></a>配置项目</h2><h3 id="配置数据库连接mysql-db-properties"><a href="#配置数据库连接mysql-db-properties" class="headerlink" title="配置数据库连接mysql_db.properties"></a>配置数据库连接mysql_db.properties</h3><p>先配置数据库连接，方便接下来的<code>Mybatis Generator</code>和Spring配置中使用，<br>在<code>main/resources/config</code>目录下创建文件<code>mysql_db.properties</code>输入下面的代码：<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">jdbc<span class="selector-class">.driver</span> = com<span class="selector-class">.mysql</span><span class="selector-class">.jdbc</span><span class="selector-class">.Driver</span>  </span><br><span class="line">jdbc<span class="selector-class">.url</span> = jdbc:mysql:<span class="comment">//127.0.0.1:3306/mybatis?characterEncoding=UTF-8  </span></span><br><span class="line">jdbc<span class="selector-class">.username</span> = root  </span><br><span class="line">jdbc<span class="selector-class">.password</span> =</span><br></pre></td></tr></table></figure></p>
<h3 id="配置Mybatis-Generator"><a href="#配置Mybatis-Generator" class="headerlink" title="配置Mybatis Generator"></a>配置<code>Mybatis Generator</code></h3><p>使用mybatis-generator-maven-plugin插件来自动生成 model 和 mapper 文件<br>参考：<a href="http://blog.csdn.net/sunny243788557/article/details/45166397" target="_blank" rel="external"> Intellij IDEA 14中使用MyBatis-generator 自动生成MyBatis代码</a>  </p>
<ol>
<li><p>准备数据库User 表，结构如下</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> <span class="string">`user`</span>;</span><br><span class="line"><span class="comment">/*!40101 SET @saved_cs_client     = @@character_set_client */</span>;</span><br><span class="line"><span class="comment">/*!40101 SET character_set_client = utf8 */</span>;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`user`</span> (</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  <span class="string">`username`</span> <span class="built_in">varchar</span>(<span class="number">32</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'用户名称'</span>,</span><br><span class="line">  <span class="string">`birthday`</span> <span class="built_in">date</span> <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'生日'</span>,</span><br><span class="line">  <span class="string">`sex`</span> <span class="built_in">char</span>(<span class="number">1</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'性别'</span>,</span><br><span class="line">  <span class="string">`address`</span> <span class="built_in">varchar</span>(<span class="number">256</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'地址'</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> AUTO_INCREMENT=<span class="number">27</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8;</span><br></pre></td></tr></table></figure>
</li>
<li><p>添加插件到<code>pom.xml</code></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">finalName</span>&gt;</span>ssm_demo<span class="tag">&lt;/<span class="name">finalName</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 以下是新增内容--&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">	  <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">	    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.generator<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-generator-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">	    <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">	      <span class="tag">&lt;<span class="name">verbose</span>&gt;</span>true<span class="tag">&lt;/<span class="name">verbose</span>&gt;</span></span><br><span class="line">	      <span class="tag">&lt;<span class="name">overwrite</span>&gt;</span>true<span class="tag">&lt;/<span class="name">overwrite</span>&gt;</span></span><br><span class="line">	    <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">	  <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>配置<code>generatorConfig.xml</code>文件<br>在<code>src/main/resouces</code>目录下创建文件<code>generatorConfig.xml</code>，输入下面的内容：  </p>
<figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span><span class="meta">?&gt;</span></span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE generatorConfiguration</span><br><span class="line">        PUBLIC "-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN"</span><br><span class="line">        "http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd"&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">generatorConfiguration</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 配置连接数据库的jar --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">classPathEntry</span> <span class="attr">location</span>=<span class="string">"F:\jar\mysql\mysql-connector-java-5.1.7-bin.jar"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context</span> <span class="attr">id</span>=<span class="string">"testTables"</span> <span class="attr">targetRuntime</span>=<span class="string">"MyBatis3"</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">commentGenerator</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 是否去除自动生成的注释 true：是 ： false:否 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"suppressAllComments"</span> <span class="attr">value</span>=<span class="string">"false"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">commentGenerator</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--数据库连接的信息：驱动类、连接地址、用户名、密码 --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--&lt;jdbcConnection driverClass="$</span></span><span class="template-variable">&#123;jdbc.driver&#125;</span><span class="xml"><span class="comment">"--&gt;</span></span><br><span class="line">                        <span class="comment">&lt;!--connectionURL="$</span></span><span class="template-variable">&#123;jdbc.url&#125;</span><span class="xml"><span class="comment">"--&gt;</span></span><br><span class="line">                        <span class="comment">&lt;!--userId="$</span></span><span class="template-variable">&#123;jdbc.username&#125;</span><span class="xml"><span class="comment">"--&gt;</span></span><br><span class="line">                        <span class="comment">&lt;!--password="$</span></span><span class="template-variable">&#123;jdbc.password&#125;</span><span class="xml"><span class="comment">"&gt;--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--&lt;/jdbcConnection&gt;--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">jdbcConnection</span> <span class="attr">driverClass</span>=<span class="string">"com.mysql.jdbc.Driver"</span></span><br><span class="line">            <span class="attr">connectionURL</span>=<span class="string">"jdbc:mysql://127.0.0.1:3306/mybatis?characterEncoding=UTF-8"</span></span><br><span class="line">            <span class="attr">userId</span>=<span class="string">"root"</span></span><br><span class="line">            <span class="attr">password</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">jdbcConnection</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 默认false，把JDBC DECIMAL 和 NUMERIC 类型解析为 Integer，为 true时把JDBC DECIMAL 和</span><br><span class="line">            NUMERIC 类型解析为java.math.BigDecimal --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">javaTypeResolver</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"forceBigDecimals"</span> <span class="attr">value</span>=<span class="string">"false"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">javaTypeResolver</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- targetProject:生成PO类的位置 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">javaModelGenerator</span> <span class="attr">targetPackage</span>=<span class="string">"com.lulee007.ssm.pojo"</span></span><br><span class="line">                            <span class="attr">targetProject</span>=<span class="string">"src\main\java"</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- enableSubPackages:是否让schema作为包的后缀 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"enableSubPackages"</span> <span class="attr">value</span>=<span class="string">"false"</span> /&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 从数据库返回的值被清理前后的空格 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"trimStrings"</span> <span class="attr">value</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">javaModelGenerator</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- targetProject:mapper映射文件生成的位置 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">sqlMapGenerator</span> <span class="attr">targetPackage</span>=<span class="string">"com.lulee007.ssm.mapper"</span></span><br><span class="line">                         <span class="attr">targetProject</span>=<span class="string">"src\main\resources"</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- enableSubPackages:是否让schema作为包的后缀 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"enableSubPackages"</span> <span class="attr">value</span>=<span class="string">"false"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">sqlMapGenerator</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- targetPackage：mapper接口生成的位置 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">javaClientGenerator</span> <span class="attr">type</span>=<span class="string">"XMLMAPPER"</span></span><br><span class="line">                             <span class="attr">targetPackage</span>=<span class="string">"com.lulee007.ssm.mapper"</span></span><br><span class="line">                             <span class="attr">targetProject</span>=<span class="string">"src\main\java"</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- enableSubPackages:是否让schema作为包的后缀 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"enableSubPackages"</span> <span class="attr">value</span>=<span class="string">"false"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">javaClientGenerator</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 指定数据库表 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">table</span> <span class="attr">tableName</span>=<span class="string">"user"</span>&gt;</span><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 有些表的字段需要指定java类型</span><br><span class="line">         &lt;table schema="" tableName=""&gt;</span><br><span class="line">            &lt;columnOverride column="" javaType="" /&gt;</span><br><span class="line">        &lt;/table&gt; --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">generatorConfiguration</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
</li>
<li><p>运行<code>mybatis-generator-maven</code>插件<br>在 Intellij 右边侧边栏选择<code>Maven Projects</code>,选择<code>Webapp</code>下的<code>Plugins</code>-&gt;<code>mybatis-generator</code><br>展开后，双击即可运行此插件。<br><img src="http://7xjzst.com1.z0.glb.clouddn.com/blog_pic_QQ20160119-7%402x.png" alt="run mybatis-generator"><br>最后输出结果：</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-attr">[INFO]</span> <span class="selector-tag">Scanning</span> <span class="selector-tag">for</span> <span class="selector-tag">projects</span>...</span><br><span class="line"><span class="selector-attr">[INFO]</span>                                                                         </span><br><span class="line"><span class="selector-attr">[INFO]</span> <span class="selector-tag">------------------------------------------------------------------------</span></span><br><span class="line"><span class="selector-attr">[INFO]</span> <span class="selector-tag">Building</span> <span class="selector-tag">ssm_demo</span> <span class="selector-tag">Maven</span> <span class="selector-tag">Webapp</span> <span class="selector-tag">1</span><span class="selector-class">.0-SNAPSHOT</span></span><br><span class="line"><span class="selector-attr">[INFO]</span> <span class="selector-tag">------------------------------------------------------------------------</span></span><br><span class="line"><span class="selector-attr">[INFO]</span></span><br><span class="line"><span class="selector-attr">[INFO]</span> <span class="selector-tag">---</span> <span class="selector-tag">mybatis-generator-maven-plugin</span><span class="selector-pseudo">:1.3.2</span><span class="selector-pseudo">:generate</span> (default-cli) @ <span class="selector-tag">ssm_demo</span> <span class="selector-tag">---</span></span><br><span class="line"><span class="selector-attr">[INFO]</span> <span class="selector-tag">Connecting</span> <span class="selector-tag">to</span> <span class="selector-tag">the</span> <span class="selector-tag">Database</span></span><br><span class="line"><span class="selector-attr">[INFO]</span> <span class="selector-tag">Introspecting</span> <span class="selector-tag">table</span> <span class="selector-tag">user</span></span><br><span class="line"><span class="selector-tag">log4j</span><span class="selector-pseudo">:WARN</span> <span class="selector-tag">No</span> <span class="selector-tag">appenders</span> <span class="selector-tag">could</span> <span class="selector-tag">be</span> <span class="selector-tag">found</span> <span class="selector-tag">for</span> <span class="selector-tag">logger</span> (org.mybatis.generator.internal.db.DatabaseIntrospector).</span><br><span class="line"><span class="selector-tag">log4j</span><span class="selector-pseudo">:WARN</span> <span class="selector-tag">Please</span> <span class="selector-tag">initialize</span> <span class="selector-tag">the</span> <span class="selector-tag">log4j</span> <span class="selector-tag">system</span> <span class="selector-tag">properly</span>.</span><br><span class="line"><span class="selector-tag">log4j</span><span class="selector-pseudo">:WARN</span> <span class="selector-tag">See</span> <span class="selector-tag">http</span>:<span class="comment">//logging.apache.org/log4j/1.2/faq.html#noconfig for more info.</span></span><br><span class="line"><span class="selector-attr">[INFO]</span> <span class="selector-tag">Generating</span> <span class="selector-tag">Example</span> <span class="selector-tag">class</span> <span class="selector-tag">for</span> <span class="selector-tag">table</span> <span class="selector-tag">user</span></span><br><span class="line"><span class="selector-attr">[INFO]</span> <span class="selector-tag">Generating</span> <span class="selector-tag">Record</span> <span class="selector-tag">class</span> <span class="selector-tag">for</span> <span class="selector-tag">table</span> <span class="selector-tag">user</span></span><br><span class="line"><span class="selector-attr">[INFO]</span> <span class="selector-tag">Generating</span> <span class="selector-tag">Mapper</span> <span class="selector-tag">Interface</span> <span class="selector-tag">for</span> <span class="selector-tag">table</span> <span class="selector-tag">user</span></span><br><span class="line"><span class="selector-attr">[INFO]</span> <span class="selector-tag">Generating</span> <span class="selector-tag">SQL</span> <span class="selector-tag">Map</span> <span class="selector-tag">for</span> <span class="selector-tag">table</span> <span class="selector-tag">user</span></span><br><span class="line"><span class="selector-attr">[INFO]</span> <span class="selector-tag">Saving</span> <span class="selector-tag">file</span> <span class="selector-tag">UserMapper</span><span class="selector-class">.xml</span></span><br><span class="line"><span class="selector-attr">[INFO]</span> <span class="selector-tag">Saving</span> <span class="selector-tag">file</span> <span class="selector-tag">UserExample</span><span class="selector-class">.java</span></span><br><span class="line"><span class="selector-attr">[INFO]</span> <span class="selector-tag">Saving</span> <span class="selector-tag">file</span> <span class="selector-tag">User</span><span class="selector-class">.java</span></span><br><span class="line"><span class="selector-attr">[INFO]</span> <span class="selector-tag">Saving</span> <span class="selector-tag">file</span> <span class="selector-tag">UserMapper</span><span class="selector-class">.java</span></span><br><span class="line"><span class="selector-attr">[INFO]</span> <span class="selector-tag">------------------------------------------------------------------------</span></span><br><span class="line"><span class="selector-attr">[INFO]</span> <span class="selector-tag">BUILD</span> <span class="selector-tag">SUCCESS</span></span><br><span class="line"><span class="selector-attr">[INFO]</span> <span class="selector-tag">------------------------------------------------------------------------</span></span><br><span class="line"><span class="selector-attr">[INFO]</span> <span class="selector-tag">Total</span> <span class="selector-tag">time</span>: <span class="selector-tag">1</span><span class="selector-class">.402s</span></span><br><span class="line"><span class="selector-attr">[INFO]</span> <span class="selector-tag">Finished</span> <span class="selector-tag">at</span>: <span class="selector-tag">Tue</span> <span class="selector-tag">Jan</span> <span class="selector-tag">19</span> <span class="selector-tag">21</span><span class="selector-pseudo">:56</span><span class="selector-pseudo">:51</span> <span class="selector-tag">CST</span> <span class="selector-tag">2016</span></span><br><span class="line"><span class="selector-attr">[INFO]</span> <span class="selector-tag">Final</span> <span class="selector-tag">Memory</span>: <span class="selector-tag">5M</span>/<span class="selector-tag">123M</span></span><br><span class="line"><span class="selector-attr">[INFO]</span> <span class="selector-tag">------------------------------------------------------------------------</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>build success 后应该会自动生成mapper接口文件、xml文件、pojo文件。<br><img src="http://7xjzst.com1.z0.glb.clouddn.com/blog_pic_QQ20160120-0%402x.png" alt="generated file"></p>
<h3 id="配置Struts2-Spring-Mybatis3"><a href="#配置Struts2-Spring-Mybatis3" class="headerlink" title="配置Struts2+Spring+Mybatis3"></a>配置Struts2+Spring+Mybatis3</h3><p>在<code>pom.xml</code>里<code>dependencies</code>节点中添加依赖：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 与Struts2集成必须使用 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- Struts2 依赖 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Struts2的核心包 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.struts<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>struts2-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;struts2.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Struts2和Spring整合插件 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.struts<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>struts2-spring-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;struts2.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Struts2 转json插件 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.struts<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>struts2-json-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;struts2.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- struts2-config-browser-plugin used in dev mode --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.struts<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>struts2-config-browser-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;struts2.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- mybatis核心包 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;mybatis.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- mybatis/spring包 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 日志文件管理包 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- log start --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;log4j.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-log4j12<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;slf4j.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- log end --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--mysql driver --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--c3p0数据库--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>c3p0<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>c3p0<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.9.1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h3 id="配置Log4j"><a href="#配置Log4j" class="headerlink" title="配置Log4j"></a>配置Log4j</h3><ol>
<li><p>在<code>main/resources</code>目录下新建<code>log4j.xml</code></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span> <span class="meta">?&gt;</span></span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE log4j:configuration SYSTEM "log4j.dtd"&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">log4j:configuration</span> <span class="attr">threshold</span>=<span class="string">"trace"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">"stdout-appender"</span> <span class="attr">class</span>=<span class="string">"org.apache.log4j.ConsoleAppender"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">layout</span> <span class="attr">class</span>=<span class="string">"org.apache.log4j.PatternLayout"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"ConversionPattern"</span> <span class="attr">value</span>=<span class="string">"%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; %5p %c&#123;1&#125;: %m%n"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">layout</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">"sql-appender"</span> <span class="attr">class</span>=<span class="string">"org.apache.log4j.FileAppender"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"File"</span> <span class="attr">value</span>=<span class="string">"db_sql.log"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"Append"</span> <span class="attr">value</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">layout</span> <span class="attr">class</span>=<span class="string">"org.apache.log4j.PatternLayout"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"ConversionPattern"</span></span><br><span class="line">				<span class="attr">value</span>=<span class="string">"-----&amp;gt; %d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; &amp;lt;%t&amp;gt; %m%n%n"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">layout</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">"sql-timing-appender"</span> <span class="attr">class</span>=<span class="string">"org.apache.log4j.FileAppender"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"File"</span> <span class="attr">value</span>=<span class="string">"db_sqltiming.log"</span>/&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"Append"</span> <span class="attr">value</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">layout</span> <span class="attr">class</span>=<span class="string">"org.apache.log4j.PatternLayout"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"ConversionPattern"</span> <span class="attr">value</span>=<span class="string">"-----&amp;gt; %d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; %m%n%n"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">layout</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">"jdbc-appender"</span> <span class="attr">class</span>=<span class="string">"org.apache.log4j.FileAppender"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"File"</span> <span class="attr">value</span>=<span class="string">"db_jdbc.log"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"Append"</span> <span class="attr">value</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">layout</span> <span class="attr">class</span>=<span class="string">"org.apache.log4j.PatternLayout"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"ConversionPattern"</span> <span class="attr">value</span>=<span class="string">"%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; %m%n"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">layout</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">"jdbc-connection"</span> <span class="attr">class</span>=<span class="string">"org.apache.log4j.FileAppender"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"File"</span> <span class="attr">value</span>=<span class="string">"db_connection.log"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"Append"</span> <span class="attr">value</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">layout</span> <span class="attr">class</span>=<span class="string">"org.apache.log4j.PatternLayout"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"ConversionPattern"</span> <span class="attr">value</span>=<span class="string">"%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; %m%n"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">layout</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">"web-file"</span> <span class="attr">class</span>=<span class="string">"org.apache.log4j.RollingFileAppender"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"File"</span> <span class="attr">value</span>=<span class="string">"web.log"</span> /&gt;</span><span class="comment">&lt;!-- 设置日志输出文件名 --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 设置是否在重新启动服务时，在原有日志的基础添加新日志 --&gt;</span>       </span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"Append"</span> <span class="attr">value</span>=<span class="string">"true"</span> /&gt;</span>       </span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"MaxBackupIndex"</span> <span class="attr">value</span>=<span class="string">"30"</span> /&gt;</span>       </span><br><span class="line">        <span class="tag">&lt;<span class="name">layout</span> <span class="attr">class</span>=<span class="string">"org.apache.log4j.PatternLayout"</span>&gt;</span>       </span><br><span class="line">            <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"ConversionPattern"</span> <span class="attr">value</span>=<span class="string">"%-d&#123;yyyy-MM-dd HH:mm:ss&#125;- [ %p ] %l %m%n"</span> /&gt;</span>       </span><br><span class="line">        <span class="tag">&lt;/<span class="name">layout</span>&gt;</span>       </span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	 <span class="comment">&lt;!-- spring --&gt;</span></span><br><span class="line">	 <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">"org.springframework"</span> <span class="attr">additivity</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line">	  <span class="tag">&lt;<span class="name">level</span> <span class="attr">value</span>=<span class="string">"debug"</span> /&gt;</span></span><br><span class="line">	 <span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	 <span class="comment">&lt;!-- xwork --&gt;</span></span><br><span class="line">	 <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">"com.opensymphony"</span> <span class="attr">additivity</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line">	  <span class="tag">&lt;<span class="name">level</span> <span class="attr">value</span>=<span class="string">"debug"</span> /&gt;</span></span><br><span class="line">	 <span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	 <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">"org.apache.struts2"</span> <span class="attr">additivity</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line">	  <span class="tag">&lt;<span class="name">level</span> <span class="attr">value</span>=<span class="string">"debug"</span> /&gt;</span></span><br><span class="line">	 <span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	 <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">"freemarker.log.Log4JLoggerFactory"</span> <span class="attr">additivity</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line">	  <span class="tag">&lt;<span class="name">level</span> <span class="attr">value</span>=<span class="string">"debug"</span> /&gt;</span></span><br><span class="line">	 <span class="tag">&lt;/<span class="name">logger</span>&gt;</span>	 </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!-- The Following 5 logs can be turned on and off while the server is running</span><br><span class="line">		LIVE in order to trace the SQL and/or all JDBC coming out of the application.</span><br><span class="line">		To turn a log on, set the level value to INFO or DEBUG (to see class name</span><br><span class="line">		and line number information in the log) The DEBUG setting is much more inefficient</span><br><span class="line">		but the output is much more useful. To turn off JDBC logging completely,</span><br><span class="line">		you must set all 5 logs to a level higher than ERROR (FATAL is suggested.) --&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- log SQL (pre-execution) plus exceptions caused by SQL --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">"jdbc.sqlonly"</span> <span class="attr">additivity</span>=<span class="string">"false"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">level</span> <span class="attr">value</span>=<span class="string">"error"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"stdout-appender"</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- log SQL with timing information, post execution --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">"jdbc.sqltiming"</span> <span class="attr">additivity</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">level</span> <span class="attr">value</span>=<span class="string">"debug"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"sql-timing-appender"</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- only use the two logs below to trace ALL JDBC information, <span class="doctag">NOTE:</span> This</span><br><span class="line">		can be very voluminous! --&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- log all jdbc calls except ResultSet calls --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">"jdbc.audit"</span> <span class="attr">additivity</span>=<span class="string">"false"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">level</span> <span class="attr">value</span>=<span class="string">"error"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"stdout-appender"</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- log the jdbc ResultSet calls --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">"jdbc.resultset"</span> <span class="attr">additivity</span>=<span class="string">"false"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">level</span> <span class="attr">value</span>=<span class="string">"error"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"stdout-appender"</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!-- log connection open/close events and dump of all open connection numbers --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">"jdbc.connection"</span> <span class="attr">additivity</span>=<span class="string">"false"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">level</span> <span class="attr">value</span>=<span class="string">"error"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"stdout-appender"</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- this log is for internal debugging of log4jdbc, itself --&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- debug logging for log4jdbc itself --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">"log4jdbc.debug"</span> <span class="attr">additivity</span>=<span class="string">"false"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">level</span> <span class="attr">value</span>=<span class="string">"error"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"stdout-appender"</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- by default, log everything to the console with a level of WARN or higher --&gt;</span></span><br><span class="line">	 <span class="comment">&lt;!-- 指定logger的设置，additivity指示是否遵循缺省的继承机制--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">"org.apache.activemq.transport.AbstractInactivityMonitor"</span> <span class="attr">additivity</span>=<span class="string">"false"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">level</span> <span class="attr">value</span> =<span class="string">"error"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"stdout-appender"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">"com.mchange.v2.resourcepool.BasicResourcePool"</span> <span class="attr">additivity</span>=<span class="string">"false"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">level</span> <span class="attr">value</span>=<span class="string">"error"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"stdout-appender"</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">"com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool"</span> <span class="attr">additivity</span>=<span class="string">"false"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">level</span> <span class="attr">value</span>=<span class="string">"error"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"stdout-appender"</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">"com.mchange.v2.c3p0.impl.NewPooledConnection"</span> <span class="attr">additivity</span>=<span class="string">"false"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">level</span> <span class="attr">value</span>=<span class="string">"error"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"stdout-appender"</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;<span class="name">root</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">level</span> <span class="attr">value</span>=<span class="string">"debug"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"stdout-appender"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"web-file"</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">log4j:configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>并拷贝<code>log4j.dtd</code>：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span> <span class="meta">?&gt;</span></span></span><br><span class="line">        <span class="comment">&lt;!--</span><br><span class="line">         Licensed to the Apache Software Foundation (ASF) under one or more</span><br><span class="line">         contributor license agreements.  See the NOTICE file distributed with</span><br><span class="line">         this work for additional information regarding copyright ownership.</span><br><span class="line">         The ASF licenses this file to You under the Apache License, Version 2.0</span><br><span class="line">         (the "License"); you may not use this file except in compliance with</span><br><span class="line">         the License.  You may obtain a copy of the License at</span><br><span class="line"></span><br><span class="line">              http://www.apache.org/licenses/LICENSE-2.0</span><br><span class="line"></span><br><span class="line">         Unless required by applicable law or agreed to in writing, software</span><br><span class="line">         distributed under the License is distributed on an "AS IS" BASIS,</span><br><span class="line">         WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span><br><span class="line">         See the License for the specific language governing permissions and</span><br><span class="line">         limitations under the License.</span><br><span class="line">        --&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- Authors: Chris Taylor, Ceki Gulcu. --&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- Version: 1.2 --&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- A configuration element consists of optional renderer</span><br><span class="line">        elements,appender elements, categories and an optional root</span><br><span class="line">        element. --&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">!ELEMENT</span> <span class="attr">log4j:configuration</span> (<span class="attr">renderer</span>*, <span class="attr">appender</span>*,<span class="attr">plugin</span>*, (<span class="attr">category</span>|<span class="attr">logger</span>)*,<span class="attr">root</span>?,</span><br><span class="line">                (<span class="attr">categoryFactory</span>|<span class="attr">loggerFactory</span>)?)&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- The "threshold" attribute takes a level value below which --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- all logging statements are disabled. --&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- Setting the "debug" enable the printing of internal log4j logging   --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- statements.                                                         --&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- By default, debug attribute is "null", meaning that we not do touch --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- internal log4j logging settings. The "null" value for the threshold --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- attribute can be misleading. The threshold field of a repository	 --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- cannot be set to null. The "null" value for the threshold attribute --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- simply means don't touch the threshold field, the threshold field   --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- keeps its old value.                                                --&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">!ATTLIST</span> <span class="attr">log4j:configuration</span></span><br><span class="line">                <span class="attr">xmlns:log4j</span>              <span class="attr">CDATA</span> #<span class="attr">FIXED</span> "<span class="attr">http:</span>//<span class="attr">jakarta.apache.org</span>/<span class="attr">log4j</span>/"</span><br><span class="line">                <span class="attr">threshold</span>                (<span class="attr">all</span>|<span class="attr">trace</span>|<span class="attr">debug</span>|<span class="attr">info</span>|<span class="attr">warn</span>|<span class="attr">error</span>|<span class="attr">fatal</span>|<span class="attr">off</span>|<span class="attr">null</span>) "<span class="attr">null</span>"</span><br><span class="line">                <span class="attr">debug</span>                    (<span class="attr">true</span>|<span class="attr">false</span>|<span class="attr">null</span>)  "<span class="attr">null</span>"</span><br><span class="line">                <span class="attr">reset</span>                    (<span class="attr">true</span>|<span class="attr">false</span>) "<span class="attr">false</span>"</span><br><span class="line">                &gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- renderer elements allow the user to customize the conversion of  --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- message objects to String.                                       --&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">!ELEMENT</span> <span class="attr">renderer</span> <span class="attr">EMPTY</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">!ATTLIST</span> <span class="attr">renderer</span></span><br><span class="line">                <span class="attr">renderedClass</span>  <span class="attr">CDATA</span> #<span class="attr">REQUIRED</span></span><br><span class="line">                <span class="attr">renderingClass</span> <span class="attr">CDATA</span> #<span class="attr">REQUIRED</span></span><br><span class="line">                &gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- Appenders must have a name and a class. --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- Appenders may contain an error handler, a layout, optional parameters --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- and filters. They may also reference (or include) other appenders. --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">!ELEMENT</span> <span class="attr">appender</span> (<span class="attr">errorHandler</span>?, <span class="attr">param</span>*,</span><br><span class="line">                <span class="attr">rollingPolicy</span>?, <span class="attr">triggeringPolicy</span>?, <span class="attr">connectionSource</span>?,</span><br><span class="line">                <span class="attr">layout</span>?, <span class="attr">filter</span>*, <span class="attr">appender-ref</span>*)&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">!ATTLIST</span> <span class="attr">appender</span></span><br><span class="line">                <span class="attr">name</span>        <span class="attr">CDATA</span>    #<span class="attr">REQUIRED</span></span><br><span class="line">                <span class="attr">class</span>    <span class="attr">CDATA</span>    #<span class="attr">REQUIRED</span></span><br><span class="line">                &gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">!ELEMENT</span> <span class="attr">layout</span> (<span class="attr">param</span>*)&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">!ATTLIST</span> <span class="attr">layout</span></span><br><span class="line">                <span class="attr">class</span>        <span class="attr">CDATA</span>    #<span class="attr">REQUIRED</span></span><br><span class="line">                &gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">!ELEMENT</span> <span class="attr">filter</span> (<span class="attr">param</span>*)&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">!ATTLIST</span> <span class="attr">filter</span></span><br><span class="line">                <span class="attr">class</span>        <span class="attr">CDATA</span>    #<span class="attr">REQUIRED</span></span><br><span class="line">                &gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- ErrorHandlers can be of any class. They can admit any number of --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- parameters. --&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">!ELEMENT</span> <span class="attr">errorHandler</span> (<span class="attr">param</span>*, <span class="attr">root-ref</span>?, <span class="attr">logger-ref</span>*,  <span class="attr">appender-ref</span>?)&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">!ATTLIST</span> <span class="attr">errorHandler</span></span><br><span class="line">                <span class="attr">class</span>        <span class="attr">CDATA</span>   #<span class="attr">REQUIRED</span></span><br><span class="line">                &gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">!ELEMENT</span> <span class="attr">root-ref</span> <span class="attr">EMPTY</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">!ELEMENT</span> <span class="attr">logger-ref</span> <span class="attr">EMPTY</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">!ATTLIST</span> <span class="attr">logger-ref</span></span><br><span class="line">                <span class="attr">ref</span> <span class="attr">CDATA</span> #<span class="attr">REQUIRED</span></span><br><span class="line">                &gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">!ELEMENT</span> <span class="attr">param</span> <span class="attr">EMPTY</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">!ATTLIST</span> <span class="attr">param</span></span><br><span class="line">                <span class="attr">name</span>        <span class="attr">CDATA</span>   #<span class="attr">REQUIRED</span></span><br><span class="line">                <span class="attr">value</span>        <span class="attr">CDATA</span>    #<span class="attr">REQUIRED</span></span><br><span class="line">                &gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- The priority class is org.apache.log4j.Level by default --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">!ELEMENT</span> <span class="attr">priority</span> (<span class="attr">param</span>*)&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">!ATTLIST</span> <span class="attr">priority</span></span><br><span class="line">                <span class="attr">class</span>   <span class="attr">CDATA</span>    #<span class="attr">IMPLIED</span></span><br><span class="line">                <span class="attr">value</span>      <span class="attr">CDATA</span> #<span class="attr">REQUIRED</span></span><br><span class="line">                &gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- The level class is org.apache.log4j.Level by default --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">!ELEMENT</span> <span class="attr">level</span> (<span class="attr">param</span>*)&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">!ATTLIST</span> <span class="attr">level</span></span><br><span class="line">                <span class="attr">class</span>   <span class="attr">CDATA</span>    #<span class="attr">IMPLIED</span></span><br><span class="line">                <span class="attr">value</span>      <span class="attr">CDATA</span> #<span class="attr">REQUIRED</span></span><br><span class="line">                &gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- If no level element is specified, then the configurator MUST not --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- touch the level of the named category. --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">!ELEMENT</span> <span class="attr">category</span> (<span class="attr">param</span>*,(<span class="attr">priority</span>|<span class="attr">level</span>)?,<span class="attr">appender-ref</span>*)&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">!ATTLIST</span> <span class="attr">category</span></span><br><span class="line">                <span class="attr">class</span>         <span class="attr">CDATA</span>   #<span class="attr">IMPLIED</span></span><br><span class="line">                <span class="attr">name</span>        <span class="attr">CDATA</span>    #<span class="attr">REQUIRED</span></span><br><span class="line">                <span class="attr">additivity</span>    (<span class="attr">true</span>|<span class="attr">false</span>) "<span class="attr">true</span>"</span><br><span class="line">                &gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- If no level element is specified, then the configurator MUST not --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- touch the level of the named logger. --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">!ELEMENT</span> <span class="attr">logger</span> (<span class="attr">level</span>?,<span class="attr">appender-ref</span>*)&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">!ATTLIST</span> <span class="attr">logger</span></span><br><span class="line">                <span class="attr">name</span>        <span class="attr">CDATA</span>    #<span class="attr">REQUIRED</span></span><br><span class="line">                <span class="attr">additivity</span>    (<span class="attr">true</span>|<span class="attr">false</span>) "<span class="attr">true</span>"</span><br><span class="line">                &gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">!ELEMENT</span> <span class="attr">categoryFactory</span> (<span class="attr">param</span>*)&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">!ATTLIST</span> <span class="attr">categoryFactory</span></span><br><span class="line">                <span class="attr">class</span>        <span class="attr">CDATA</span> #<span class="attr">REQUIRED</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">!ELEMENT</span> <span class="attr">loggerFactory</span> (<span class="attr">param</span>*)&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">!ATTLIST</span> <span class="attr">loggerFactory</span></span><br><span class="line">                <span class="attr">class</span>        <span class="attr">CDATA</span> #<span class="attr">REQUIRED</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">!ELEMENT</span> <span class="attr">appender-ref</span> <span class="attr">EMPTY</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">!ATTLIST</span> <span class="attr">appender-ref</span></span><br><span class="line">                <span class="attr">ref</span> <span class="attr">CDATA</span> #<span class="attr">REQUIRED</span></span><br><span class="line">                &gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- plugins must have a name and class and can have optional parameters --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">!ELEMENT</span> <span class="attr">plugin</span> (<span class="attr">param</span>*, <span class="attr">connectionSource</span>?)&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">!ATTLIST</span> <span class="attr">plugin</span></span><br><span class="line">                <span class="attr">name</span>        <span class="attr">CDATA</span>       #<span class="attr">REQUIRED</span></span><br><span class="line">                <span class="attr">class</span>    <span class="attr">CDATA</span>  #<span class="attr">REQUIRED</span></span><br><span class="line">                &gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">!ELEMENT</span> <span class="attr">connectionSource</span> (<span class="attr">dataSource</span>?, <span class="attr">param</span>*)&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">!ATTLIST</span> <span class="attr">connectionSource</span></span><br><span class="line">                <span class="attr">class</span>        <span class="attr">CDATA</span>  #<span class="attr">REQUIRED</span></span><br><span class="line">                &gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">!ELEMENT</span> <span class="attr">dataSource</span> (<span class="attr">param</span>*)&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">!ATTLIST</span> <span class="attr">dataSource</span></span><br><span class="line">                <span class="attr">class</span>        <span class="attr">CDATA</span>  #<span class="attr">REQUIRED</span></span><br><span class="line">                &gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">!ELEMENT</span> <span class="attr">triggeringPolicy</span> ((<span class="attr">param</span>|<span class="attr">filter</span>)*)&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">!ATTLIST</span> <span class="attr">triggeringPolicy</span></span><br><span class="line">                <span class="attr">name</span>        <span class="attr">CDATA</span>  #<span class="attr">IMPLIED</span></span><br><span class="line">                <span class="attr">class</span>    <span class="attr">CDATA</span>  #<span class="attr">REQUIRED</span></span><br><span class="line">                &gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">!ELEMENT</span> <span class="attr">rollingPolicy</span> (<span class="attr">param</span>*)&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">!ATTLIST</span> <span class="attr">rollingPolicy</span></span><br><span class="line">                <span class="attr">name</span>        <span class="attr">CDATA</span>  #<span class="attr">IMPLIED</span></span><br><span class="line">                <span class="attr">class</span>    <span class="attr">CDATA</span>  #<span class="attr">REQUIRED</span></span><br><span class="line">                &gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- If no priority element is specified, then the configurator MUST not --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- touch the priority of root. --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- The root category always exists and cannot be subclassed. --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">!ELEMENT</span> <span class="attr">root</span> (<span class="attr">param</span>*, (<span class="attr">priority</span>|<span class="attr">level</span>)?, <span class="attr">appender-ref</span>*)&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- ==================================================================== --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--                       A logging event                                --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- ==================================================================== --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">!ELEMENT</span> <span class="attr">log4j:eventSet</span> (<span class="attr">log4j:event</span>*)&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">!ATTLIST</span> <span class="attr">log4j:eventSet</span></span><br><span class="line">                <span class="attr">xmlns:log4j</span>             <span class="attr">CDATA</span> #<span class="attr">FIXED</span> "<span class="attr">http:</span>//<span class="attr">jakarta.apache.org</span>/<span class="attr">log4j</span>/"</span><br><span class="line">                <span class="attr">version</span>                (<span class="attr">1.1</span>|<span class="attr">1.2</span>) "<span class="attr">1.2</span>"</span><br><span class="line">                <span class="attr">includesLocationInfo</span>   (<span class="attr">true</span>|<span class="attr">false</span>) "<span class="attr">true</span>"</span><br><span class="line">                &gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">!ELEMENT</span> <span class="attr">log4j:event</span> (<span class="attr">log4j:message</span>, <span class="attr">log4j:NDC</span>?, <span class="attr">log4j:throwable</span>?,</span><br><span class="line">                <span class="attr">log4j:locationInfo</span>?, <span class="attr">log4j:properties</span>?) &gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- The timestamp format is application dependent. --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">!ATTLIST</span> <span class="attr">log4j:event</span></span><br><span class="line">                <span class="attr">logger</span>     <span class="attr">CDATA</span> #<span class="attr">REQUIRED</span></span><br><span class="line">                <span class="attr">level</span>      <span class="attr">CDATA</span> #<span class="attr">REQUIRED</span></span><br><span class="line">                <span class="attr">thread</span>     <span class="attr">CDATA</span> #<span class="attr">REQUIRED</span></span><br><span class="line">                <span class="attr">timestamp</span>  <span class="attr">CDATA</span> #<span class="attr">REQUIRED</span></span><br><span class="line">                <span class="attr">time</span>       <span class="attr">CDATA</span> #<span class="attr">IMPLIED</span></span><br><span class="line">                &gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">!ELEMENT</span> <span class="attr">log4j:message</span> (#<span class="attr">PCDATA</span>)&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">!ELEMENT</span> <span class="attr">log4j:NDC</span> (#<span class="attr">PCDATA</span>)&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">!ELEMENT</span> <span class="attr">log4j:throwable</span> (#<span class="attr">PCDATA</span>)&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">!ELEMENT</span> <span class="attr">log4j:locationInfo</span> <span class="attr">EMPTY</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">!ATTLIST</span> <span class="attr">log4j:locationInfo</span></span><br><span class="line">                <span class="attr">class</span>  <span class="attr">CDATA</span>    #<span class="attr">REQUIRED</span></span><br><span class="line">                <span class="attr">method</span> <span class="attr">CDATA</span>    #<span class="attr">REQUIRED</span></span><br><span class="line">                <span class="attr">file</span>   <span class="attr">CDATA</span>    #<span class="attr">REQUIRED</span></span><br><span class="line">                <span class="attr">line</span>   <span class="attr">CDATA</span>    #<span class="attr">REQUIRED</span></span><br><span class="line">                &gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">!ELEMENT</span> <span class="attr">log4j:properties</span> (<span class="attr">log4j:data</span>*)&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">!ELEMENT</span> <span class="attr">log4j:data</span> <span class="attr">EMPTY</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">!ATTLIST</span> <span class="attr">log4j:data</span></span><br><span class="line">                <span class="attr">name</span>   <span class="attr">CDATA</span>    #<span class="attr">REQUIRED</span></span><br><span class="line">                <span class="attr">value</span>  <span class="attr">CDATA</span>    #<span class="attr">REQUIRED</span></span><br><span class="line">                &gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="配置-ApplicationContext"><a href="#配置-ApplicationContext" class="headerlink" title="配置 ApplicationContext"></a>配置 ApplicationContext</h3><p>配置 Spring IOC 注入和事件控制，在<code>main/resources/config/spring</code> 中分别创建<code>applicationContext-dao.xml</code>、<code>applicationContext-service.xml</code>、<code>applicationContext-transaction.xml</code>文件。</p>
<ul>
<li><p><code>applicationContext-dao.xml</code></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span><span class="meta">?&gt;</span></span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span> <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--获取数据库配置文件--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">"classpath:mysql_db.properties"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--设置数据源c3p0--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"dataSource"</span> <span class="attr">class</span>=<span class="string">"com.mchange.v2.c3p0.ComboPooledDataSource"</span> <span class="attr">destroy-method</span>=<span class="string">"close"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClass"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.driver&#125;"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jdbcUrl"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.url&#125;"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"user"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.username&#125;"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.password&#125;"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxPoolSize"</span> <span class="attr">value</span>=<span class="string">"50"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"minPoolSize"</span> <span class="attr">value</span>=<span class="string">"2"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxIdleTime"</span> <span class="attr">value</span>=<span class="string">"60"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--sqlsessionFactory bean--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"sqlSession"</span> <span class="attr">class</span>=<span class="string">"org.mybatis.spring.SqlSessionFactoryBean"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"configLocation"</span> <span class="attr">value</span>=<span class="string">"classpath:config/mybatis/SqlMapConfig.xml"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--自动扫描mapper接口，并注入sqlsession--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.mybatis.spring.mapper.MapperScannerConfigurer"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"basePackage"</span> <span class="attr">value</span>=<span class="string">"com.lulee007.ssm.mapper"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"sqlSessionFactoryBeanName"</span> <span class="attr">value</span>=<span class="string">"sqlSession"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>applicationContext-service.xml</code></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span><span class="meta">?&gt;</span></span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span><br><span class="line">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span><br><span class="line">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span><br><span class="line">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">       <span class="comment">&lt;!--扫描service--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.lulee007.ssm.service"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>applicationContext-transaction.xml</code></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span><span class="meta">?&gt;</span></span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span><br><span class="line">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="attr">xmlns:tx</span>=<span class="string">"http://www.springframework.org/schema/tx"</span></span><br><span class="line">       <span class="attr">xmlns:aop</span>=<span class="string">"http://www.springframework.org/schema/aop"</span></span><br><span class="line">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">       <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"dataSourceTransactionManager"</span> <span class="attr">class</span>=<span class="string">"org.springframework.jdbc.datasource.DataSourceTransactionManager"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>/&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">       <span class="tag">&lt;<span class="name">tx:advice</span> <span class="attr">id</span>=<span class="string">"txAdvice"</span> <span class="attr">transaction-manager</span>=<span class="string">"dataSourceTransactionManager"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line">                     <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"find*"</span> <span class="attr">propagation</span>=<span class="string">"REQUIRED"</span>/&gt;</span></span><br><span class="line">                     <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"update*"</span> <span class="attr">propagation</span>=<span class="string">"REQUIRED"</span>/&gt;</span></span><br><span class="line">                     <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"delete*"</span> <span class="attr">propagation</span>=<span class="string">"REQUIRED"</span>/&gt;</span></span><br><span class="line">                     <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"add*"</span> <span class="attr">propagation</span>=<span class="string">"REQUIRED"</span>/&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">tx:advice</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="配置Struts2"><a href="#配置Struts2" class="headerlink" title="配置Struts2"></a>配置<code>Struts2</code></h3><p>在<code>src/main/resources/config/struts2</code>目录下添加<code>struts-core.xml</code>文件:<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span><span class="meta">?&gt;</span></span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE struts PUBLIC</span><br><span class="line">        "-//Apache Software Foundation//DTD Struts Configuration 2.1.7//EN"</span><br><span class="line">        "http://struts.apache.org/dtds/struts-2.1.dtd"&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">struts</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 加载STRUTS默认配置 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">file</span>=<span class="string">"struts-default.xml"</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">include</span> <span class="attr">file</span>=<span class="string">"struts-plugin.xml"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 声明STRUTS常量配置 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constant</span> <span class="attr">name</span>=<span class="string">"struts.enable.DynamicMethodInvocation"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constant</span> <span class="attr">name</span>=<span class="string">"struts.ognl.allowStaticMethodAccess"</span> <span class="attr">value</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- struts.devMode used in dev mode --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constant</span> <span class="attr">name</span>=<span class="string">"struts.devMode"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constant</span> <span class="attr">name</span>=<span class="string">"struts.i18n.encoding"</span> <span class="attr">value</span>=<span class="string">"UTF-8"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constant</span> <span class="attr">name</span>=<span class="string">"struts.objectFactory"</span></span><br><span class="line">              <span class="attr">value</span>=<span class="string">"org.apache.struts2.spring.StrutsSpringObjectFactory"</span>/&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- &lt;constant name="struts.multipart.saveDir" value="/temp"/&gt; --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constant</span> <span class="attr">name</span>=<span class="string">"struts.ui.theme"</span> <span class="attr">value</span>=<span class="string">"simple"</span>/&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- &lt;constant name="struts.action.extension" value=","/&gt;--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- &lt;constant name="struts.multipart.saveDir" value="d:uploadtemp"/&gt;--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 改变struts2默认为2M的上传文件大小限制 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">constant</span> <span class="attr">name</span>=<span class="string">"struts.multipart.maxSize"</span> <span class="attr">value</span>=<span class="string">"1024000000"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 指定不经过struts2框架处理的URL规则--&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- &lt;constant name="struts.action.excludePattern" value="/downloadFile,/httpService,/dwr/.*,/dwr/test/.*"/&gt; --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 加载JSON结果转换,加载自定义结果 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">"my-struts"</span> <span class="attr">extends</span>=<span class="string">"struts-default"</span> <span class="attr">namespace</span>=<span class="string">"/"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result-types</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result-type</span> <span class="attr">name</span>=<span class="string">"json"</span> <span class="attr">class</span>=<span class="string">"org.apache.struts2.json.JSONResult"</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 这里指定将被Struts2序列化的属性，该属性在action中必须有对应的getter方法 --&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 指定是否序列化空的属性 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"defaultEncoding"</span>&gt;</span>utf-8<span class="tag">&lt;/<span class="name">param</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"excludeNullProperties"</span>&gt;</span>false<span class="tag">&lt;/<span class="name">param</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 指定内容类型，默认为application/json，IE浏览器会提示下载 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"contentType"</span>&gt;</span>text/html<span class="tag">&lt;/<span class="name">param</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 是否启用压缩 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"enableGZIP"</span>&gt;</span>false<span class="tag">&lt;/<span class="name">param</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 是否忽略层级关系,即不关注父类中的对象 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"ignoreHierarchy"</span>&gt;</span>false<span class="tag">&lt;/<span class="name">param</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 排除的对象 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"excludeProperties"</span>&gt;</span></span><br><span class="line">                    request,session</span><br><span class="line">                <span class="tag">&lt;/<span class="name">param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">result-type</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">result-types</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">interceptors</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">interceptor</span> <span class="attr">name</span>=<span class="string">"json"</span> <span class="attr">class</span>=<span class="string">"org.apache.struts2.json.JSONInterceptor"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">interceptor-stack</span> <span class="attr">name</span>=<span class="string">"myStack"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">interceptor-ref</span> <span class="attr">name</span>=<span class="string">"defaultStack"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">interceptor-stack</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">interceptors</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">default-interceptor-ref</span> <span class="attr">name</span>=<span class="string">"myStack"</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- comment added by lulee007 设置找不到action默认跳转的页面-&gt;首页 index --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">default-action-ref</span> <span class="attr">name</span>=<span class="string">"index"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">global-results</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">name</span>=<span class="string">"json"</span> <span class="attr">type</span>=<span class="string">"json"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">name</span>=<span class="string">"index"</span> <span class="attr">type</span>=<span class="string">"redirect"</span>&gt;</span>/index<span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">name</span>=<span class="string">"exception"</span>&gt;</span>/views/common/error.jsp<span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">global-results</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">package</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 预留加载业务-Action配置   --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--&lt;include file="config/struts2/struts-user.xml"/&gt;--&gt;</span>      </span><br><span class="line"><span class="tag">&lt;/<span class="name">struts</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h3 id="配置web-xml文件"><a href="#配置web-xml文件" class="headerlink" title="配置web.xml文件"></a>配置<code>web.xml</code>文件</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span><span class="meta">?&gt;</span></span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">"http://xmlns.jcp.org/xml/ns/javaee"</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd"</span> <span class="attr">version</span>=<span class="string">"3.1"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 设置log4j --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>log4jConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:config/log4j/log4j.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--设置spring 配置文件的位置--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath*:config/spring/applicationContext-*.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--配置spring listener--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>org.springframework.web.context.ContextLoaderListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>org.springframework.web.util.Log4jConfigListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--解决POST乱码问题--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>utf-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- Struts2的核心过滤器配置 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>struts2<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span></span><br><span class="line">            org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</span><br><span class="line">        <span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>config<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>config/struts2/struts-core.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Struts2过滤器拦截所有的.action请求 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>struts2<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="配置-tomcat-启动"><a href="#配置-tomcat-启动" class="headerlink" title="配置 tomcat 启动"></a>配置 tomcat 启动</h3><p>点击 Intellij 顶部工具栏的<code>Run/Debug Configurations...</code>，选择<code>Edit Configurations...</code><br><img src="http://7xjzst.com1.z0.glb.clouddn.com/blog_pic_QQ20160121-0%402x.png" alt="edit configurations"><br>在弹出来的配置对话框中，点击左上角的<code>+</code>选择添加<code>Tomcat Server</code>-&gt;<code>Local</code>来添加一个本地的<code>Tomcat Server</code>，<br><img src="http://7xjzst.com1.z0.glb.clouddn.com/blog_pic_QQ20160121-1%402x.png" alt="add tomcat server"><br>然后配置 <code>tomcat server</code>:<br>填写顶部的<code>Name</code>，输入我们的工程名称<code>ssm_demo</code>，然后会在底部有个小灯泡提示，<code>No artifacts for deployment</code>，我们点击<code>Fix</code><br>会有两个选择，我们选择第二个<code>ssm_demo war:exploded</code>，然后在<code>Deployment</code>标签页，填写<code>Application context</code>，输入<code>/ssm_demo</code>，这样当启动tomcat后，打开浏览器输入『localhost://8080/ssm_demo』就可以看到我们的主页了。<br><img src="http://7xjzst.com1.z0.glb.clouddn.com/blog_pic_addtomcat.gif" alt="setting tomcat"><br><strong>注意：</strong> 如果在启动过程中提示端口号被占，可以通过修改这个<code>config</code>的<code>Http port</code>：<br><img src="http://7xjzst.com1.z0.glb.clouddn.com/blog_pic_QQ20160122-0%402x.png" alt="set http port"></p>
<h2 id="测试启动"><a href="#测试启动" class="headerlink" title="测试启动"></a>测试启动</h2><p>目前配置好了基本的项目，现在来测试一下：<br>点击 Intellij 顶部工具栏的<code>Run/Debug Configurations...</code>，这个时候应该有默认我们配置好的<code>ssm_demo</code>可以启动了。<br>点击 旁边的 <code>Run</code>（三角形），或者按快捷键<code>Command</code>+<code>R</code>来运行。<br>这时，Intellij 应该会自动弹出默认浏览器并打开主页<code>http://localhost:8082/ssm_demo/</code>，手动输入此地址也可以看到以下内容:<br><img src="http://7xjzst.com1.z0.glb.clouddn.com/blog_pic_QQ20160122-1%402x.png" alt="home page"></p>
<h3 id="编写UserService"><a href="#编写UserService" class="headerlink" title="编写UserService"></a>编写UserService</h3><p>编写Service来去数据库的用户信息：<br>新建<code>UserService.java</code>接口文件到<code>src/main/java/com/lulee007/ssm/service/</code>目录下，输入下面的代码：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lulee007.ssm.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.lulee007.ssm.pojo.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * Created by lulee007 on 16/1/19.</span><br><span class="line"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * 查找所有用户</span><br><span class="line">     * <span class="doctag">@return</span></span><br><span class="line">     * <span class="doctag">@throws</span> Exception</span><br><span class="line">     */</span></span><br><span class="line">    <span class="function">List&lt;User&gt; <span class="title">findUser</span><span class="params">()</span><span class="keyword">throws</span> Exception</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">Boolean <span class="title">saveUser</span><span class="params">(User user)</span> <span class="keyword">throws</span>  Exception</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>然后新建<code>userServiceImpl.java</code>接口文件到<code>src/main/java/com/lulee007/ssm/service/</code>目录下，输入下面的代码：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lulee007.ssm.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.lulee007.ssm.mapper.UserMapper;</span><br><span class="line"><span class="keyword">import</span> com.lulee007.ssm.pojo.User;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * Created by lulee007 on 16/1/19.</span><br><span class="line"> */</span></span><br><span class="line"> <span class="comment">// 注解为spring service</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line">    <span class="comment">//User接口</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">findUser</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">//调用mapper类中的selectByExample方法，如果传入类型为null，则表示无条件查找</span></span><br><span class="line">        List&lt;User&gt; users = userMapper.selectByExample(<span class="keyword">null</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> users;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Boolean <span class="title">saveUser</span><span class="params">(User user)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userMapper.insertSelective(user)==<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="编写UserAction"><a href="#编写UserAction" class="headerlink" title="编写UserAction"></a>编写UserAction</h3><p>接下来测试一下 Struts2 ，我们用之前mybatis 帮我们生成好的 pojo,dao,mapper 来写一个展示user 信息的表格：</p>
<ul>
<li><p>新建<code>UserAction.java</code>到<code>src/main/java/com/lulee007/ssm/action/</code>目录下，输入下面的代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lulee007.ssm.action;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.lulee007.ssm.pojo.User;</span><br><span class="line"><span class="keyword">import</span> com.lulee007.ssm.service.UserService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * Created by lulee007 on 16/1/21.</span><br><span class="line"> */</span></span><br><span class="line"><span class="comment">//将这个UserAction 注解为Controller</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserAction</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//自动注解UserService</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String title;</span><br><span class="line">    <span class="keyword">private</span> List&lt;User&gt; users;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//action 默认执行的入口</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">execute</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//取出所有user</span></span><br><span class="line">            users=userService.findUser();</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//设置标题</span></span><br><span class="line">        title=<span class="string">"My User Page"</span>+<span class="keyword">new</span> Date();</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/***</span><br><span class="line">     * 以下是 getter setter 在jsp里要调用我们的 title 和 users 就必须写setter getter方法,不然</span><br><span class="line">     * 没法取到或设置其值.</span><br><span class="line">     * ****/</span></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     *</span><br><span class="line">     * <span class="doctag">@return</span></span><br><span class="line">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getTitle</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> title;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setTitle</span><span class="params">(String title)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.title = title;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">getUsers</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> users;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUsers</span><span class="params">(List&lt;User&gt; users)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.users = users;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建<code>action-user.xml</code><br>创建<code>action-user.xml</code>文件到<code>src/main/resources/config/struts2/</code>目录下，输入下面的内容：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span><span class="meta">?&gt;</span></span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE struts PUBLIC</span><br><span class="line">        "-//Apache Software Foundation//DTD Struts Configuration 2.1.7//EN"</span><br><span class="line">        "http://struts.apache.org/dtds/struts-2.1.dtd"&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">struts</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">"home"</span> <span class="attr">extends</span>=<span class="string">"my-struts"</span> <span class="attr">namespace</span>=<span class="string">"/user"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- User 列表页 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">action</span> <span class="attr">name</span>=<span class="string">"index"</span> <span class="attr">class</span>=<span class="string">"com.lulee007.ssm.action.UserAction"</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--action 返回值为success时,则返回页面user.jsp,并解析为html展示到网页--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">name</span>=<span class="string">"success"</span>&gt;</span>/WEB-INF/views/user.jsp<span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">action</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">package</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">struts</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>修改之前我们创建的<code>src/main/resources/config/struts2/struts-core.xml</code>，<br>把最后面，取消注释，最终如下：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 加载业务-Action配置   --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">include</span> <span class="attr">file</span>=<span class="string">"config/struts2/struts-user.xml"</span>/&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>添加<code>user.jsp</code>文件到<code>src/main/webapp/WEB-INF/views/</code>目录下：</p>
<figure class="highlight erb"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-</span><br><span class="line">  Created by IntelliJ IDEA.</span><br><span class="line">  <span class="symbol">User:</span> lulee007</span><br><span class="line">  <span class="symbol">Date:</span> <span class="number">16</span>/<span class="number">1</span>/<span class="number">21</span></span><br><span class="line">  <span class="symbol">Time:</span> <span class="number">21</span><span class="symbol">:</span><span class="number">39</span></span><br><span class="line">  To change this template use File <span class="params">| Settings |</span> File Templates.</span><br><span class="line">-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">%</span></span></span><span class="ruby">@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> </span><span class="xml"><span class="tag">%&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">%</span></span></span><span class="ruby">@ taglib prefix=<span class="string">"s"</span> uri=<span class="string">"/struts-tags"</span> </span><span class="xml"><span class="tag">%&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>$&#123;title&#125;<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-显示我们的设置的标题-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>$&#123;title&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-显示我们从数据库取出来的用户数据-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">            Name</span><br><span class="line">        <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">            Birthday</span><br><span class="line">        <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">            Sex</span><br><span class="line">        <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">            Address</span><br><span class="line">        <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-struts2的遍历标签,循环取出用户的信息-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">s:iterator</span> <span class="attr">value</span>=<span class="string">"users"</span> <span class="attr">id</span>=<span class="string">"user"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>$&#123;user.username&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>$&#123;user.birthday&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>$&#123;user.sex&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>$&#123;user.address&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">s:iterator</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>重新运行 tomcat ，然后在地址栏里输入：<code>http://localhost:8082/ssm_demo/user/index</code><br>可以看到页面：<br><img src="http://7xjzst.com1.z0.glb.clouddn.com/blog_pic_QQ20160122-2%402x.png" alt="user page"></p>
<h3 id="strtus-action插件"><a href="#strtus-action插件" class="headerlink" title="strtus action插件"></a>strtus action插件</h3><p>Config Browser插件是一个可以在运行时查看应用配置的简单工具. 在调试一些和配置相关的问题时, 非常有用.<br><strong>功能</strong></p>
<blockquote>
<p>Browsable view of loaded configuration 浏览已加载的配置<br>Shows all accessible action URLs 查看所有可以访问的URL</p>
</blockquote>
<p>直接在浏览器输入<code>YOUR_HOST</code>+<code>config-browser/index.action</code>即可，如<code>http://localhost:8082/ssm_demo/config-browser/index.action</code><br><img src="http://7xjzst.com1.z0.glb.clouddn.com/blog_pic_QQ20160122-3%402x.png" alt="confit-browser-1"><br>这个是我们的UserAction相关的信息：<br><img src="http://7xjzst.com1.z0.glb.clouddn.com/blog_pic_QQ20160122-4%402x.png" alt="confit-browser-user-action"></p>
<h2 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h2><p>至此我们完成了所有配置，本文主要介绍了最基本的用法，如果需要其他功能在这个基础上进行扩展即可。<br>项目源码：<a href="https://github.com/lulee007/ssm_demo" target="_blank" rel="external">https://github.com/lulee007/ssm_demo</a> tag:basic-ssm</p>

      
    </div>
    
  </div>

  
    
<nav id="article-nav">
  
    <a href="/2016/01/14/SSM-Struts2-Spring-Mybatis3-Web-项目单元测试/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption"><</strong>
      <div class="article-nav-title">
        
          SSM：Struts2+Spring+Mybatis+Jersey Web 项目单元测试
        
      </div>
    </a>
  
  
    <a href="/2016/01/10/2016年度计划/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">2016年度计划</div>
      <strong class="article-nav-caption">></strong>
    </a>
  
</nav>

      
      <p style="height: 10px;"></p>
<span id="busuanzi_container_page_pv"
      style="display: inline;vertical-align: middle;width: 100%; position:absolute; bottom:0; text-align:center;font-size: x-small;color: darkcyan;margin-bottom: 8px;">
  本文总阅读量<span id="busuanzi_value_page_pv"></span>次
</span>
<p style="height: 10px;"></p>

      
    
</article>
<div class="share">
  
  <div class="share_jia">
	<!-- JiaThis Button BEGIN -->
	<div class="jiathis_style">
		<span class="jiathis_txt">分享到: &nbsp; </span>
		<a class="jiathis_button_weixin">微信</a>
		<a class="jiathis_button_cqq">QQ好友</a>
		<a class="jiathis_button_qzone">QQ空间</a>
		<a class="jiathis_button_tsina">新浪微博</a>
		<a href="http://www.jiathis.com/share?uid=2080230" class="jiathis jiathis_txt jiathis_separator jtico jtico_jiathis" target="_blank">更多</a>
		<a class="jiathis_counter_style"></a>
	</div>
	<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=2080230" charset="utf-8"></script>
	<!-- JiaThis Button END -->
</div>
<!-- JiaThis Button BEGIN -->

  

  
</div>

<div class="duoshuo">
	<!-- 多说评论框 start -->
	<div class="ds-thread" data-thread-key="SSM-Struts2-Spring-Mybatis-Jersey-Web-项目搭建" data-title="SSM：Struts2+Spring+Mybatis Web 项目搭建" data-url="http://devlu.me/2016/01/14/SSM-Struts2-Spring-Mybatis-Jersey-Web-项目搭建/"></div>
	<!-- 多说评论框 end -->
	<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
	<script type="text/javascript">
	var duoshuoQuery = {short_name:"devlu"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
	<!-- 多说公共JS代码 end -->
</div>




</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2016 Lulee007
    	</div>
      	<div class="footer-right">
      		由<a href="http://hexo.io/" target="_blank">Hexo</a>强力驱动  主题: <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> 来自 Litten
      	</div>
        <div>
        
        <span id="busuanzi_container_site_pv">
            本站总访问量<span id="busuanzi_value_site_pv"></span>次
        </span>
        
        
        <script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1259326040'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s11.cnzz.com/z_stat.php%3Fid%3D1259326040%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script>
        
        </div>
    </div>
  </div>

</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="http://lib.sinaapp.com/js/jquery/1.8.3/jquery.min.js"></script>
  <script src="/js/jquery.imagesloaded.min.js"></script>
  <script src="/gallery/gallery.js"></script>
  <link rel="stylesheet" href="/gallery/gallery.css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: false,
		animate: true,
		isHome: false,
		isPost: true,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
<script src="/js/main.js"></script>



<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-51346799-2', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->






<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>



  </div>

</body>
</html>